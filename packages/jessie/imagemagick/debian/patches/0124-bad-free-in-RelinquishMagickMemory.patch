From a3a88c62277631f6ea0bdec8484937dc4cf04ac8 Mon Sep 17 00:00:00 2001
From: Cristy <urban-warrior@imagemagick.org>
Date: Tue, 25 Jul 2017 08:20:06 -0400
Subject: [PATCH] bad free in RelinquishMagickMemory

bug-debian: https://bugs.debian.org/870119
bug: https://github.com/ImageMagick/ImageMagick/issues/621
origin: https://github.com/ImageMagick/ImageMagick/commit/0de8fd616b92888a7e3d0f640fbb2d397d093944

(cherry picked from commit 0de8fd616b92888a7e3d0f640fbb2d397d093944)
---
 coders/png.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/coders/png.c b/coders/png.c
index 94e50eae3..53d2e5396 100644
--- a/coders/png.c
+++ b/coders/png.c
@@ -2126,6 +2126,7 @@ static Image *ReadOnePNGImage(MngInfo *mng_info,
     }
 
   pixel_info=(MemoryInfo *) NULL;
+  quantum_scanline = (Quantum *) NULL;
 
   if (setjmp(png_jmpbuf(ping)))
     {
